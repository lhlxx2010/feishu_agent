# Feishu Agent å®‰è£…ä½¿ç”¨æŒ‡å—

## ğŸ“¦ å®‰è£…æ–¹å¼

### æ–¹å¼ä¸€ï¼šé€šè¿‡ uv tool installï¼ˆæ¨èï¼‰

è¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œé€‚åˆç›´æ¥ä½¿ç”¨ï¼š

```bash
uv tool install --from git+https://github.com/Wulnut/feishu_agent lark-agent
```

å®‰è£…åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `lark-agent` å‘½ä»¤ï¼š

```bash
lark-agent
```

### æ–¹å¼äºŒï¼šä»æºç å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Wulnut/feishu_agent.git
cd feishu_agent

# å®‰è£…ä¾èµ–
uv sync

# è¿è¡Œ
uv run main.py
```

### æ–¹å¼ä¸‰ï¼šDocker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t feishu-agent .

# è¿è¡Œï¼ˆéœ€è¦æä¾› .env æ–‡ä»¶ï¼‰
docker run --env-file .env lark-agent
```

---

## âš™ï¸ é…ç½®

### 1. ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¦‚æœä½¿ç”¨æ–¹å¼äºŒæˆ–ä¸‰ï¼‰ï¼Œæˆ–åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­è®¾ç½®ï¼š

```bash
# é£ä¹¦åº”ç”¨å‡­è¯ï¼ˆå¯é€‰ï¼Œä»…åœ¨ä½¿ç”¨ IM åŠŸèƒ½æ—¶éœ€è¦ï¼‰
LARK_APP_ID=your_app_id
LARK_APP_SECRET=your_app_secret

# é£ä¹¦é¡¹ç›® API å‡­è¯ï¼ˆäºŒé€‰ä¸€ï¼Œè‡³å°‘éœ€è¦é…ç½®ä¸€ç§ï¼‰
# æ–¹å¼ A: ä½¿ç”¨ Token å’Œ User Key
FEISHU_PROJECT_USER_TOKEN=your_token
FEISHU_PROJECT_USER_KEY=your_user_key

# æ–¹å¼ B: ä½¿ç”¨ Plugin ID å’Œ Secretï¼ˆæ¨èï¼‰
FEISHU_PROJECT_PLUGIN_ID=your_plugin_id
FEISHU_PROJECT_PLUGIN_SECRET=your_plugin_secret

# å¯é€‰é…ç½®
FEISHU_PROJECT_BASE_URL=https://project.feishu.cn  # ç§æœ‰åŒ–éƒ¨ç½²åœ°å€
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
```

### 2. MCP å®¢æˆ·ç«¯é…ç½®

#### Cursor IDE é…ç½®

ç¼–è¾‘ `~/.cursor/mcp.json`ï¼ˆLinux/macOSï¼‰æˆ– `%APPDATA%\Cursor\mcp.json`ï¼ˆWindowsï¼‰ï¼š

**å¦‚æœä½¿ç”¨ `uv tool install` å®‰è£…ï¼š**
```json
{
  "mcpServers": {
    "feishu-agent": {
      "command": "feishu-agent"
    }
  }
}
```

**å¦‚æœä»æºç è¿è¡Œï¼š**
```json
{
  "mcpServers": {
    "feishu-agent": {
      "command": "uv",
      "args": [
        "run",
        "--directory",
        "/path/to/feishu_agent",
        "main.py"
      ]
    }
  }
}
```

#### Claude Desktop é…ç½®

ç¼–è¾‘ `~/Library/Application Support/Claude/claude_desktop_config.json`ï¼ˆmacOSï¼‰æˆ– `%APPDATA%\Claude\claude_desktop_config.json`ï¼ˆWindowsï¼‰ï¼š

```json
{
  "mcpServers": {
    "feishu-agent": {
      "command": "feishu-agent"
    }
  }
}
```

---

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

é…ç½®å®Œæˆåï¼Œåœ¨ Cursor æˆ– Claude Desktop ä¸­å¯ä»¥ç›´æ¥é€šè¿‡è‡ªç„¶è¯­è¨€è°ƒç”¨ï¼š

- "åˆ—å‡ºæ‰€æœ‰é¡¹ç›®ç©ºé—´"
- "åœ¨ Project Management é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª P0 ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼šä¿®å¤ç™»å½•é—®é¢˜"
- "æŸ¥è¯¢ SR6D2VA-7552-Lark é¡¹ç›®çš„æ‰€æœ‰ä»»åŠ¡"
- "æŸ¥æ‰¾æ‰€æœ‰ SG06VA ç›¸å…³çš„ä»»åŠ¡"
- "æŠŠä»»åŠ¡ 12345 çš„çŠ¶æ€æ”¹ä¸ºå·²å®Œæˆ"
- "æŸ¥çœ‹çŠ¶æ€å­—æ®µæœ‰å“ªäº›å¯é€‰å€¼"

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§**ï¼š
   - å¦‚æœåŒæ—¶è®¾ç½®äº† `FEISHU_PROJECT_USER_TOKEN` å’Œ `FEISHU_PROJECT_PLUGIN_ID`ï¼Œä¼˜å…ˆä½¿ç”¨ Token
   - æ¨èä½¿ç”¨ Plugin ID/Secret æ–¹å¼ï¼Œæ”¯æŒè‡ªåŠ¨åˆ·æ–° Token

2. **æ—¥å¿—è¾“å‡º**ï¼š
   - å¦‚æœå­˜åœ¨ `log/` ç›®å½•ï¼Œæ—¥å¿—ä¼šå†™å…¥ `log/agent.log`
   - å¦åˆ™æ—¥å¿—ä¼šè¾“å‡ºåˆ° stderr

3. **é…ç½®ä¿®æ”¹å**ï¼š
   - éœ€è¦é‡å¯ Cursor æˆ– Claude Desktop æ‰èƒ½ç”Ÿæ•ˆ

4. **ç‰ˆæœ¬æ›´æ–°**ï¼š
   ```bash
   # æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
   uv tool install --from git+https://github.com/Wulnut/feishu_agent feishu-agent --force
   ```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šæ‰¾ä¸åˆ° lark-agent å‘½ä»¤

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ `uv` å·²æ­£ç¡®å®‰è£…
- æ£€æŸ¥ `~/.local/bin` æ˜¯å¦åœ¨ PATH ä¸­ï¼ˆLinux/macOSï¼‰
- æ£€æŸ¥ `%USERPROFILE%\.local\bin` æ˜¯å¦åœ¨ PATH ä¸­ï¼ˆWindowsï¼‰
- éªŒè¯å®‰è£…ï¼šè¿è¡Œ `uv tool list` æŸ¥çœ‹å·²å®‰è£…çš„å·¥å…·

### é—®é¢˜ï¼šè®¤è¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®ï¼ˆè‡³å°‘éœ€è¦é…ç½® `FEISHU_PROJECT_PLUGIN_ID` å’Œ `FEISHU_PROJECT_PLUGIN_SECRET`ï¼Œæˆ– `FEISHU_PROJECT_USER_TOKEN` å’Œ `FEISHU_PROJECT_USER_KEY`ï¼‰
- ç¡®è®¤é£ä¹¦åº”ç”¨æƒé™å·²æ­£ç¡®é…ç½®
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

### é—®é¢˜ï¼šä½¿ç”¨ IM åŠŸèƒ½æ—¶æç¤ºç¼ºå°‘ LARK_APP_ID æˆ– LARK_APP_SECRET

**è§£å†³æ–¹æ¡ˆ**ï¼š
- `LARK_APP_ID` å’Œ `LARK_APP_SECRET` æ˜¯å¯é€‰çš„ï¼Œä»…åœ¨éœ€è¦ä½¿ç”¨ IMï¼ˆå³æ—¶æ¶ˆæ¯ï¼‰åŠŸèƒ½æ—¶æ‰éœ€è¦é…ç½®
- å¦‚æœåªéœ€è¦ä½¿ç”¨é¡¹ç›®ï¼ˆProjectï¼‰åŠŸèƒ½ï¼Œå¯ä»¥ä¸é…ç½®è¿™ä¸¤ä¸ªå­—æ®µ
- å¦‚æœéœ€è¦ä½¿ç”¨ IM åŠŸèƒ½ï¼Œè¯·æŒ‰ç…§ä¸Šé¢çš„ç¯å¢ƒå˜é‡é…ç½®æ–¹æ³•è®¾ç½®è¿™ä¸¤ä¸ªå­—æ®µ

### é—®é¢˜ï¼šMCP è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤é…ç½®æ–‡ä»¶è·¯å¾„æ­£ç¡®
- æ£€æŸ¥å‘½ä»¤è·¯å¾„æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹ Cursor/Claude Desktop çš„æ—¥å¿—è¾“å‡º
