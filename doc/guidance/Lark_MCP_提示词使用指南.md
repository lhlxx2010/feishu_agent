# Lark MCP 提示词使用指南

本指南旨在帮助用户更准确地触发 Lark MCP 工具，高效地查询和管理飞书项目中的工作项。

---

## 📋 工作项类型说明

根据飞书项目管理系统，常见的工作项类型包括：

- **需求管理**: 软件需求、功能需求等
- **项目管理**: 项目、子项目等
- **Issue管理**: 问题、缺陷等
- **任务**: 日常任务
- **软件测试流程**: 测试用例、测试计划等
- **版本管理**: 版本发布计划等
- **执行用例**: 测试执行记录等
- **投标管理**: 投标相关工作项等
- **文档管理**: 文档类工作项等
- **应急任务管理**: 紧急任务等
- **客户档案**: 客户信息管理等
- **招投标管理工作台**: 招投标流程管理等

---

## 🎯 提示词优化模板

### 1. 查询工作项列表

**推荐提示词：**
```
请使用 lark 帮我查看 [工作项类型] 中的工作项
请使用 lark 获取 [项目名称] 下的 [工作项类型]
用 lark 查一下 [工作项类型] 有多少个
lark 列出 [工作项类型] 的所有工作项
```

**示例：**
- ✅ `请使用 lark 帮我查看需求管理中的工作项`
- ✅ `用 lark 获取 Project Management 项目的需求管理列表`
- ✅ `lark 查一下 Issue管理 有多少个`
- ✅ `lark 列出项目管理的所有工作项`

---

### 2. 按项目过滤工作项

**推荐提示词：**
```
请使用 lark 获取 [工作项类型] 中属于 [项目名称] 的工作项
用 lark 查看 [项目名称] 项目的 [工作项类型]
lark 帮我找 [项目名称] 相关的 [工作项类型]
请使用 lark 查询 [项目名称] 的 [工作项类型] 列表
```

**示例：**
- ✅ `请使用 lark 获取需求管理中属于 CLRAO-SG0006D2VA 的工作项`
- ✅ `用 lark 查看 CLRAO-SG0006D2VA 项目的需求管理`
- ✅ `lark 帮我找 CLRAO-SG0006D2VA 相关的软件需求`
- ✅ `请使用 lark 查询 Alaska 的 Issue管理 列表`

---

### 3. 按关键词搜索

**推荐提示词：**
```
请使用 lark 搜索包含 [关键词] 的 [工作项类型]
用 lark 找一下名称中有 [关键词] 的工作项
lark 帮我查找 [关键词] 相关的任务
请使用 lark 查询名称包含 [关键词] 的 [工作项类型]
```

**示例：**
- ✅ `请使用 lark 搜索包含 "WiFi" 的需求管理`
- ✅ `用 lark 找一下名称中有 "Claro_BR" 的工作项`
- ✅ `lark 帮我查找 4G 相关的需求`
- ✅ `请使用 lark 查询名称包含 "BIST" 的任务`

---

### 4. 按状态/优先级过滤

**推荐提示词：**
```
请使用 lark 获取 [状态] 的 [工作项类型]
用 lark 查看优先级为 [P0/P1/P2/P3] 的工作项
lark 帮我找所有 [状态] 且优先级 [P级别] 的任务
请使用 lark 筛选 [工作项类型] 中 [状态] 的项目
```

**示例：**
- ✅ `请使用 lark 获取进行中的需求管理`
- ✅ `用 lark 查看优先级为 P1 的 Issue管理`
- ✅ `lark 帮我找所有开始状态且优先级 P0 的任务`
- ✅ `请使用 lark 筛选需求管理中已完成的项目`

**可用状态值**：待处理、进行中、已完成、已关闭等（具体取决于项目配置）

**可用优先级**：P0（最高）、P1、P2（默认）、P3（最低）

---

### 5. 按负责人过滤

**推荐提示词：**
```
请使用 lark 获取 [负责人] 负责的 [工作项类型]
用 lark 查看 [负责人] 的工作项
lark 帮我找 [负责人] 的所有任务
请使用 lark 查询负责人为 [负责人] 的 [工作项类型]
```

**示例：**
- ✅ `请使用 lark 获取张三负责的需求管理`
- ✅ `用 lark 查看李四的工作项`
- ✅ `lark 帮我找王五的所有任务`
- ✅ `请使用 lark 查询负责人为 user@example.com 的 Issue管理`

---

### 6. 按关联项目查询（高级功能）

**推荐提示词：**
```
请使用 lark 获取 [工作项类型] 中与工作项 [ID] 关联的项
用 lark 查看关联到 [项目名称]（ID: [工作项ID]）的 [工作项类型]
lark 帮我找与 [项目名称] 关联的需求
请使用 lark 查询关联到工作项 [ID] 的 [工作项类型]
```

**示例：**
- ✅ `请使用 lark 获取需求管理中与工作项 6181818812 关联的项`
- ✅ `用 lark 查看关联到 CLRAO-SG0006D2VA（ID: 6181818812）的需求管理`
- ✅ `lark 帮我找与 CLRAO-SG0006D2VA 关联的所有需求`
- ✅ `请使用 lark 查询关联到工作项 6181818812 的需求管理`

---

### 7. 查看项目列表

**推荐提示词：**
```
请使用 lark 列出所有项目
用 lark 查看有哪些项目
lark 帮我看一下项目空间列表
请使用 lark 显示所有可用的项目
```

**示例：**
- ✅ `请使用 lark 列出所有项目`
- ✅ `用 lark 查看 Project Management 空间有哪些项目`
- ✅ `lark 帮我看一下项目列表`
- ✅ `请使用 lark 显示所有可用的项目`

---

### 8. 创建工作项

**推荐提示词：**
```
请使用 lark 创建一个 [工作项类型]，标题为 [标题]
用 lark 新建 [工作项类型]：[标题]
lark 帮我创建任务 [标题]
请使用 lark 在 [项目名称] 中创建 [工作项类型]
```

**示例：**
- ✅ `请使用 lark 创建一个需求，标题为"支持暗黑模式"`
- ✅ `用 lark 新建 Issue：修复登录页面崩溃问题`
- ✅ `lark 帮我创建任务"完成API文档"`
- ✅ `请使用 lark 在 Project Management 中创建 P0 优先级的需求`

---

### 9. 更新工作项

**推荐提示词：**
```
请使用 lark 更新工作项 [ID]，将 [字段] 改为 [新值]
用 lark 修改工作项 [ID] 的 [字段]
lark 帮我把工作项 [ID] 的状态改为 [新状态]
请使用 lark 将工作项 [ID] 的优先级设置为 [P级别]
```

**示例：**
- ✅ `请使用 lark 更新工作项 12345，将状态改为进行中`
- ✅ `用 lark 修改工作项 12345 的优先级为 P0`
- ✅ `lark 帮我把工作项 12345 的状态改为已完成`
- ✅ `请使用 lark 将工作项 12345 的负责人设置为张三`

---

### 10. 组合条件查询

**推荐提示词：**
```
请使用 lark 获取 [项目名称] 的 [工作项类型]，筛选 [条件1] 和 [条件2]
用 lark 查看 [工作项类型]，要求 [条件1]、[条件2] 和 [条件3]
lark 帮我找 [条件1] 且 [条件2] 的 [工作项类型]
```

**示例：**
- ✅ `请使用 lark 获取 Project Management 的需求管理，筛选优先级 P0 且状态为进行中`
- ✅ `用 lark 查看需求管理，要求包含 "WiFi"、优先级 P1 和状态为待处理`
- ✅ `lark 帮我找优先级 P0 且负责人为张三的需求管理`

---

## 🔑 关键触发词

为了更好地触发 lark MCP，建议在提示词中包含以下元素：

### 1. 明确指定工具
- `请使用 lark`
- `用 lark`
- `lark 帮我`
- `lark`（直接使用）

### 2. 动作词
- **查询类**: `获取`、`查看`、`查询`、`列出`、`显示`
- **搜索类**: `搜索`、`查找`、`找`、`筛选`
- **操作类**: `创建`、`新建`、`更新`、`修改`、`删除`

### 3. 工作项类型
必须使用飞书系统中实际存在的类型名称：
- 需求管理
- 项目管理
- Issue管理
- 任务
- 软件测试流程
- 版本管理
- 执行用例
- 投标管理
- 文档管理
- 应急任务管理
- 客户档案
- 招投标管理工作台

### 4. 过滤条件（可选）
- **项目名称**: 如 `Project Management`、`CLRAO-SG0006D2VA`
- **关键词**: 工作项名称中的关键字
- **状态**: 待处理、进行中、已完成、已关闭等
- **优先级**: P0、P1、P2、P3
- **负责人**: 姓名或邮箱
- **关联工作项 ID**: 数字 ID，如 `6181818812`

---

## 📝 常用场景速查表

| 场景 | 提示词示例 | 说明 |
|------|-----------|------|
| 查看所有需求 | `lark 帮我查看需求管理中的工作项` | 获取所有需求管理类型的工作项 |
| 按项目过滤 | `lark 获取 CLRAO-SG0006D2VA 的需求管理` | 获取特定项目的需求 |
| 搜索关键词 | `lark 搜索包含 "WiFi" 的需求` | 按名称关键词搜索 |
| 按优先级 | `lark 查看优先级 P1 的需求` | 按优先级筛选 |
| 按状态 | `lark 获取进行中的需求管理` | 按状态筛选 |
| 按负责人 | `lark 获取张三负责的需求管理` | 按负责人筛选 |
| 关联查询 | `lark 获取与工作项 6181818812 关联的需求` | 查找关联的工作项 |
| 列出项目 | `lark 列出所有项目` | 查看所有可用项目 |
| 组合查询 | `lark 获取 Project Management 的需求管理，筛选 P0 且进行中` | 多条件组合筛选 |
| 创建工作项 | `lark 创建一个需求，标题为"支持暗黑模式"` | 创建新的工作项 |
| 更新工作项 | `lark 更新工作项 12345，将状态改为进行中` | 更新现有工作项 |

---

## 💡 使用技巧

### 1. 精确指定工作项类型
- ✅ **正确**: `lark 获取需求管理中的工作项`
- ❌ **错误**: `lark 获取需求中的工作项`（类型名称不完整）

### 2. 使用完整的项目名称
- ✅ **正确**: `lark 获取 Project Management 的需求管理`
- ⚠️ **可能不准确**: `lark 获取 PM 的需求`（缩写可能导致歧义）

### 3. 查询前先了解工作项 ID
如果需要按关联项目查询，先查询项目管理类型获取工作项 ID：
```
1. lark 列出所有项目
2. lark 查看项目管理中的工作项
3. lark 获取需求管理中与工作项 [ID] 关联的项
```

### 4. 支持中英文混合
- ✅ `lark 获取 Project Management 的需求管理`
- ✅ `lark get tasks from Project Management`

### 5. 使用明确的过滤条件
- ✅ **明确**: `lark 获取优先级 P0 且状态为进行中的需求`
- ❌ **模糊**: `lark 获取重要的需求`（"重要"不是系统字段）

### 6. 分页查询大量数据
如果工作项很多，可以指定页码和每页数量：
- `lark 获取需求管理，第 2 页，每页 50 条`

---

## ⚠️ 常见错误与解决方案

### 错误 1: 工作项类型不存在
**问题**: `获取任务列表失败: 工作项类型 '任务' 未找到`

**解决方案**: 
- 使用 `lark 列出所有项目` 先查看可用的工作项类型
- 确保类型名称与系统中完全一致

### 错误 2: 项目不存在
**问题**: `未找到项目: XXX`

**解决方案**: 
- 使用 `lark 列出所有项目` 查看正确的项目名称
- 使用完整的项目名称或 project_key

### 错误 3: 字段值无效
**问题**: `Failed to resolve priority 'High'`

**解决方案**: 
- 优先级使用 P0、P1、P2、P3
- 使用 `lark 获取需求管理的可用优先级选项` 查看有效值

### 错误 4: 权限不足
**问题**: `403 Forbidden`

**解决方案**: 
- 检查环境变量中的认证信息
- 确认账号有相应权限

---

## 📚 参考资料

- [飞书项目 API 参考](../Feishu_project_api/API_Reference.md)
- [工作项 CRUD 操作指南](../Feishu_project_api/格式说明/工作项CRUD操作指南.md)
- [工作项过滤方法汇总](../Feishu_project_api/格式说明/工作项过滤方法汇总.md)
- [项目进度跟踪](../Planning/Progress.md)

---

## 🔄 更新日志

### 2026-01-14
- ✅ 创建 Lark MCP 提示词使用指南
- ✅ 添加关联查询提示词示例（`related_to` 参数）
- ✅ 完善各类场景的提示词模板
- ✅ 添加常见错误与解决方案

---

**最后更新**: 2026-01-14  
**版本**: 1.0.0  
**维护者**: Feishu Agent Team
